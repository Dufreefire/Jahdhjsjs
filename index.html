<!DOCTYPE html>    
<html lang="vi">    
<head>    
    <meta charset="UTF-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">    
    <title>Tool T√†i X·ªâu MD5 - Premium Edition</title>    
    <script src="https://cdn.tailwindcss.com"></script>    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
    <style>    
        @import url('https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;700;900&display=swap');    
        :root { --main: #00f2ff; --sub: #7000ff; --dark: #020205; --gold: #fbbf24; --success: #22c55e; }    
        
        * { -webkit-user-select: none; user-select: none; box-sizing: border-box; outline: none !important; -webkit-tap-highlight-color: transparent; }    
        input, textarea { -webkit-user-select: auto !important; user-select: auto !important; pointer-events: auto !important; }  
        
        body { background-color: var(--dark); color: white; font-family: 'Lexend', sans-serif; overflow: hidden; height: 100vh; margin: 0; }    
        #bg-canvas { position: fixed; inset: 0; z-index: -1; }    

        /* Giao di·ªán chung */
        .glass-card { background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(0, 242, 255, 0.15); backdrop-filter: blur(20px); border-radius: 30px; }    
        .btn-main { background: linear-gradient(135deg, var(--main) 0%, var(--sub) 100%); color: white; font-weight: 800; cursor: pointer; transition: 0.3s; box-shadow: 0 10px 20px rgba(0, 242, 255, 0.2); }    
        .cyber-input { background: rgba(0, 0, 0, 0.6) !important; border: 1px solid rgba(255, 255, 255, 0.1) !important; color: var(--main) !important; border-radius: 15px !important; text-align: center; }    
    
        /* Menu Bottom */
        .nav-bar { position: fixed; bottom: 0; left: 0; right: 0; height: 75px; background: rgba(10,10,20,0.95); border-top: 1px solid rgba(0,242,255,0.2); backdrop-filter: blur(20px); display: flex; justify-content: space-around; align-items: center; z-index: 999; }    
        .nav-item { display: flex; flex-direction: column; align-items: center; color: #555; cursor: pointer; transition: 0.3s; width: 20%; }    
        .nav-item.active { color: var(--main); text-shadow: 0 0 10px var(--main); }    
        .nav-item span { font-size: 7px; font-weight: 900; text-transform: uppercase; margin-top: 4px; letter-spacing: 0.5px; }    
        .nav-center { position: relative; top: -20px; width: 60px; height: 60px; background: linear-gradient(135deg, var(--main), var(--sub)); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px rgba(0, 242, 255, 0.5); border: 4px solid var(--dark); transition: 0.3s; }    

        /* Info & Ranking Styles */
        .info-row { display: flex; align-items: center; gap: 15px; padding: 15px; background: rgba(255,255,255,0.03); border-radius: 20px; border: 1px solid rgba(255,255,255,0.05); margin-bottom: 10px; }
        .rank-item { display: flex; align-items: center; justify-content: space-between; padding: 12px 15px; background: rgba(255,255,255,0.02); border-radius: 15px; margin-bottom: 8px; border: 1px solid rgba(255,255,255,0.03); }
        .top-1 { border: 1px solid var(--gold); background: rgba(251, 191, 36, 0.05); }

        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .pkg-card { background-size: 200% 200%; animation: rainbow 3s linear infinite; transition: 0.3s; border: 1px solid rgba(255,255,255,0.1); position: relative; overflow: hidden; }
        .pkg-card:active { transform: scale(0.96); }
        .pkg-1 { background: linear-gradient(-45deg, #a8582d, #5e331b, #a8582d, #3d2111); }
        .pkg-2 { background: linear-gradient(-45deg, #94a3b8, #475569, #94a3b8, #1e293b); }
        .pkg-3 { background: linear-gradient(-45deg, #fbbf24, #b45309, #fbbf24, #78350f); }
        .pkg-4 { background: linear-gradient(-45deg, #22d3ee, #0891b2, #22d3ee, #164e63); }
        .pkg-5 { background: linear-gradient(-45deg, #c084fc, #7e22ce, #c084fc, #4c1d95); }
        .pkg-6 { background: linear-gradient(-45deg, #f43f5e, #9f1239, #f43f5e, #4c0519); }

        /* Update 1: Loading Success Professional */
        .status-overlay { position: fixed; inset: 0; background: rgba(2, 2, 5, 0.95); z-index: 20000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(15px); }
        .check-container { width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: var(--success); box-shadow: 0 0 30px rgba(34, 197, 94, 0.4); margin: 0 auto 20px; }
        .check-icon { font-size: 40px; color: white; animation: checkPop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes checkPop { 0% { transform: scale(0) rotate(-45deg); opacity: 0; } 100% { transform: scale(1) rotate(0); opacity: 1; } }

        /* Update 2: Mua Key Success */
        .key-box { background: rgba(0, 242, 255, 0.1); border: 2px dashed var(--main); padding: 20px; border-radius: 20px; margin: 20px 0; }
        
        /* Update 3: N·∫°p ti·ªÅn chuy√™n nghi·ªáp */
        .bank-info-card { background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.01) 100%); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 20px; }
        .copy-badge { background: var(--main); color: black; font-size: 9px; padding: 2px 8px; border-radius: 5px; font-weight: 900; margin-left: 8px; cursor: pointer; }
    </style>    
</head>    
<body>    

<div id="status-overlay" class="status-overlay">
    <div class="text-center px-6">
        <div id="loading-spinner" class="mb-4">
            <div style="width:60px;height:60px;border:4px solid var(--main);border-top-color:transparent;border-radius:50%;" class="animate-spin mx-auto"></div>
            <p id="status-text" class="text-cyan-400 font-black text-xs tracking-widest uppercase mt-4 animate-pulse italic">ƒêang x·ª≠ l√Ω d·ªØ li·ªáu...</p>
        </div>
        <div id="success-done" class="hidden animate__animated animate__fadeIn">
            <div class="check-container">
                <i class="fas fa-check check-icon"></i>
            </div>
            <h2 id="success-title" class="text-2xl font-black italic mb-2 uppercase text-white">Th√†nh C√¥ng!</h2>
            <p id="success-desc" class="text-gray-400 text-xs mb-6 max-w-[250px] mx-auto"></p>
            
            <div id="key-result-box" class="hidden key-box">
                <p class="text-[10px] text-cyan-400 font-black uppercase mb-2">M√£ Key VIP c·ªßa b·∫°n</p>
                <p id="key-val" class="text-2xl font-black tracking-widest text-white mb-2"></p>
                <p class="text-[9px] text-gray-500 uppercase">H·ªá th·ªëng ƒë√£ l∆∞u v√†o l·ªãch s·ª≠ mua</p>
            </div>

            <button onclick="closeStatus()" class="w-full py-4 btn-main rounded-2xl text-xs font-black uppercase tracking-widest">Tuy·ªát v·ªùi</button>
        </div>
    </div>
</div>

<canvas id="bg-canvas"></canvas>    
    
<div class="flex items-center justify-center min-h-screen p-4 pb-28">    
    <div class="w-full max-w-[420px]">    
            
        <div id="box-login" class="glass-card p-10 animate__animated animate__fadeIn">    
            <div class="text-center mb-8">    
                <h1 class="text-3xl font-black uppercase italic italic">TOOL T√ÄI X·ªàU <span class="text-cyan-400">MD5</span> VIP</h1>    
                <p class="text-[9px] text-gray-500 font-bold uppercase mt-1 tracking-[4px]">H·ªá Th·ªëng Ph√¢n T√≠ch Premium</p>    
            </div>    
            <div class="space-y-4">    
                <input id="u" type="text" placeholder="T√äN ƒêƒÇNG NH·∫¨P" class="w-full p-5 cyber-input uppercase font-bold text-xs">    
                <input id="p" type="password" placeholder="M·∫¨T KH·∫®U" class="w-full p-5 cyber-input text-xs">    
                <button onclick="doLogin()" class="w-full py-5 btn-main rounded-2xl text-sm font-black uppercase italic tracking-widest">ƒêƒÉng nh·∫≠p</button>    
                <button onclick="navigateTo('reg')" class="w-full text-[10px] text-gray-500 uppercase font-bold">Ch∆∞a c√≥ t√†i kho·∫£n? ƒêƒÉng k√Ω</button>    
            </div>    
        </div>

        <div id="box-reg" class="hidden glass-card p-8 animate__animated animate__fadeIn">
             <h2 class="text-center font-black text-cyan-400 mb-6 uppercase text-sm">ƒêƒÉng k√Ω th√†nh vi√™n</h2>
             <div class="space-y-3">
                 <input id="r-u" type="text" placeholder="T√äN ƒêƒÇNG NH·∫¨P" class="w-full p-4 cyber-input uppercase text-xs">
                 <input id="r-p" type="password" placeholder="M·∫¨T KH·∫®U" class="w-full p-4 cyber-input text-xs">
                 <input id="r-email" type="email" placeholder="GMAIL" class="w-full p-4 cyber-input text-xs">
                 <input id="r-phone" type="tel" placeholder="S·ªê ƒêI·ªÜN THO·∫†I" class="w-full p-4 cyber-input text-xs">
                 <button onclick="doReg()" class="w-full py-5 btn-main rounded-2xl text-xs font-black uppercase">X√°c nh·∫≠n ƒëƒÉng k√Ω</button>
                 <button onclick="navigateTo('login')" class="w-full text-[10px] text-gray-500 uppercase mt-2">Quay l·∫°i ƒëƒÉng nh·∫≠p</button>
             </div>
        </div>

        <div id="box-portal" class="hidden animate__animated animate__zoomIn">    
            <div class="flex justify-between items-center mb-6 px-2">    
                <div class="flex items-center gap-4">    
                    <img src="https://i.imgur.com/WLeaCev.jpeg" class="w-14 h-14 rounded-2xl border-2 border-cyan-400">    
                    <div>    
                        <p id="portal-user" class="text-cyan-400 text-[11px] font-black uppercase"></p>    
                        <p id="portal-bal" class="text-2xl font-black text-white italic">0 ƒë</p>    
                    </div>    
                </div>    
            </div>    
            <div class="glass-card p-5 mb-5 bg-gradient-to-br from-cyan-500/10 to-transparent">    
                <p class="text-[9px] text-gray-500 font-bold uppercase mb-2">M√É ƒê·ªäNH DANH C·ª¶A B·∫†N</p>    
                <div class="flex justify-between items-center">    
                    <span id="portal-ref" class="text-xl font-black tracking-[4px] text-white"></span>    
                    <button onclick="navigateTo('nap')" class="px-5 py-2 btn-main rounded-full text-[10px] font-black uppercase">N·∫°p</button>    
                </div>    
            </div>    
            <div class="grid grid-cols-2 gap-4">    
                <div onclick="navigateTo('buy-key')" class="glass-card p-8 text-center cursor-pointer hover:border-cyan-400 transition">    
                    <span class="text-4xl block mb-2">üíé</span><p class="text-[10px] font-black uppercase">G√≥i Key VIP</p>    
                </div>    
                <div onclick="showPersonal()" class="glass-card p-8 text-center cursor-pointer hover:border-cyan-400 transition">    
                    <span class="text-4xl block mb-2">üë§</span><p class="text-[10px] font-black uppercase">C√° Nh√¢n</p>    
                </div>    
            </div>    
        </div>

        <div id="box-nap" class="hidden glass-card p-8 text-center animate__animated animate__fadeIn">
            <h3 class="text-cyan-400 font-black mb-6 uppercase text-sm italic">H·ªá th·ªëng n·∫°p t·ª± ƒë·ªông 24/7</h3>
            
            <div class="bank-info-card mb-6">
                <div class="bg-white p-2 rounded-2xl inline-block mb-4 shadow-[0_0_20px_rgba(255,255,255,0.1)]">
                    <img id="qr-code" src="" class="w-40 h-40">
                </div>
                
                <div class="space-y-3 text-left">
                    <div class="flex justify-between items-center border-b border-white/5 pb-2">
                        <span class="text-[10px] text-gray-500 font-bold uppercase">Ch·ªß TK</span>
                        <span class="text-[11px] font-black uppercase">ADMIN TOOL VIP</span>
                    </div>
                    <div class="flex justify-between items-center border-b border-white/5 pb-2">
                        <span class="text-[10px] text-gray-500 font-bold uppercase">S·ªë TK</span>
                        <div class="flex items-center">
                            <span class="text-[11px] font-black text-cyan-400">103886058569</span>
                            <span onclick="copyText('103886058569')" class="copy-badge">COPY</span>
                        </div>
                    </div>
                    <div class="flex justify-between items-center border-b border-white/5 pb-2">
                        <span class="text-[10px] text-gray-500 font-bold uppercase">N·ªôi dung</span>
                        <div class="flex items-center">
                            <span id="ref-id-nap" class="text-[11px] font-black text-yellow-500"></span>
                            <span id="btn-copy-ref" class="copy-badge">COPY</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="p-4 bg-red-500/10 border border-red-500/20 rounded-2xl mb-6">
                <p class="text-[10px] text-red-400 font-bold leading-relaxed">L∆ØU √ù: Chuy·ªÉn ƒë√∫ng n·ªôi dung ƒë·ªÉ ƒë∆∞·ª£c c·ªông ti·ªÅn t·ª± ƒë·ªông sau 30 gi√¢y.</p>
            </div>

            <input id="nap-amount" type="number" placeholder="NH·∫¨P S·ªê TI·ªÄN ƒê√É CHUY·ªÇN" class="w-full p-4 cyber-input mb-4 text-xs font-black">
            <button onclick="sendNapTele()" class="w-full py-5 btn-main rounded-2xl text-xs font-black uppercase">T√¥i ƒë√£ chuy·ªÉn kho·∫£n</button>
        </div>

        <div id="box-buy-key" class="hidden glass-card p-6 animate__animated animate__fadeInUp">
            <h3 class="text-center font-black text-cyan-400 mb-6 uppercase text-sm tracking-widest">C·ª≠a h√†ng G√≥i VIP</h3>
            <div class="space-y-3 max-h-[420px] overflow-y-auto pr-1">
                <div onclick="buyKey(5000, 0.04, 'G√≥i ƒê·ªìng')" class="pkg-card pkg-1 p-5 rounded-2xl flex justify-between items-center">
                    <div><p class="text-xs font-black text-white uppercase">G√≥i ƒê·ªìng (1H)</p><p class="text-[8px] text-white/70 uppercase">Tr·∫£i nghi·ªám nhanh</p></div>
                    <span class="font-black text-white">5,000ƒë</span>
                </div>
                <div onclick="buyKey(15000, 1, 'G√≥i B·∫°c')" class="pkg-card pkg-2 p-5 rounded-2xl flex justify-between items-center">
                    <div><p class="text-xs font-black text-white uppercase">G√≥i B·∫°c (24H)</p><p class="text-[8px] text-white/70 uppercase">D√πng trong ng√†y</p></div>
                    <span class="font-black text-white">15,000ƒë</span>
                </div>
                <div onclick="buyKey(55000, 7, 'G√≥i V√†ng')" class="pkg-card pkg-3 p-5 rounded-2xl flex justify-between items-center">
                    <div><p class="text-xs font-black text-white uppercase">G√≥i V√†ng (7 Ng√†y)</p><p class="text-[8px] text-white/70 uppercase">B√°n ch·∫°y nh·∫•t</p></div>
                    <span class="font-black text-white">55,000ƒë</span>
                </div>
                <div onclick="buyKey(70000, 30, 'G√≥i Kim C∆∞∆°ng')" class="pkg-card pkg-4 p-5 rounded-2xl flex justify-between items-center">
                    <div><p class="text-xs font-black text-white uppercase">G√≥i Kim C∆∞∆°ng (1 Th√°ng)</p><p class="text-[8px] text-white/70 uppercase">Ti·∫øt ki·ªám chi ph√≠</p></div>
                    <span class="font-black text-white">70,000ƒë</span>
                </div>
                <div onclick="buyKey(150000, 90, 'G√≥i Cao Th·ªß')" class="pkg-card pkg-5 p-5 rounded-2xl flex justify-between items-center">
                    <div><p class="text-xs font-black text-white uppercase">G√≥i Cao Th·ªß (3 Th√°ng)</p><p class="text-[8px] text-white/70 uppercase">ƒê·∫≥ng c·∫•p VIP</p></div>
                    <span class="font-black text-white">150,000ƒë</span>
                </div>
                <div onclick="buyKey(250000, 9999, 'G√≥i Vƒ©nh Vi·ªÖn')" class="pkg-card pkg-6 p-5 rounded-2xl flex justify-between items-center">
                    <div><p class="text-xs font-black text-white uppercase">G√≥i Vƒ©nh Vi·ªÖn</p><p class="text-[8px] text-white/70 uppercase">S·ª≠ d·ª•ng m√£i m√£i</p></div>
                    <span class="font-black text-white">250,000ƒë</span>
                </div>
            </div>
        </div>

        <div id="box-info" class="hidden animate__animated animate__fadeInUp">
            <div class="glass-card p-6">
                <div class="text-center mb-8">
                    <img src="https://i.imgur.com/WLeaCev.jpeg" class="w-20 h-20 rounded-3xl border-2 border-cyan-400 mx-auto mb-3">
                    <h3 id="info-u" class="text-xl font-black text-white uppercase italic">USER NAME</h3>
                    <p class="text-[10px] text-cyan-400 font-bold uppercase tracking-widest">Premium Member</p>
                </div>
                <div class="space-y-3">
                    <div class="info-row"><span>üîë</span><div><p class="text-[8px] text-gray-500 font-black uppercase">Key VIP</p><p id="info-key" class="text-xs font-bold text-white"></p></div></div>
                    <div class="info-row"><span>üìß</span><div><p class="text-[8px] text-gray-500 font-black uppercase">Email</p><p id="info-email" class="text-xs font-bold text-white"></p></div></div>
                    <div class="info-row"><span>üì±</span><div><p class="text-[8px] text-gray-500 font-black uppercase">S·ªë ƒëi·ªán tho·∫°i</p><p id="info-phone" class="text-xs font-bold text-white"></p></div></div>
                    <div class="info-row"><span>üí∞</span><div><p class="text-[8px] text-gray-500 font-black uppercase">S·ªë d∆∞</p><p id="info-bal" class="text-xs font-bold text-green-400"></p></div></div>
                </div>
                <button onclick="navigateTo('portal')" class="w-full mt-6 py-4 bg-white/5 rounded-2xl text-[10px] font-black uppercase tracking-widest">ƒê√≥ng h·ªì s∆°</button>
            </div>
        </div>

        <div id="box-rank" class="hidden animate__animated animate__fadeInUp">
            <div class="glass-card p-6">
                <div class="text-center mb-6">
                    <h3 class="text-lg font-black text-white uppercase italic">üèÜ B·∫£ng X·∫øp H·∫°ng</h3>
                    <p class="text-[9px] text-gray-500 uppercase font-bold">Top 10 ƒê·∫°i Gia N·∫°p Ti·ªÅn</p>
                </div>
                <div id="ranking-list" class="space-y-2 max-h-[350px] overflow-y-auto pr-1"></div>
            </div>
        </div>

        <div id="box-use-key" class="hidden glass-card p-8 animate__animated animate__fadeIn">
            <div id="key-activation">
                <h3 class="text-center font-black text-cyan-400 mb-6 uppercase text-xs">K√≠ch Ho·∫°t B·∫£n Quy·ªÅn</h3>
                <input id="key-input" type="text" placeholder="D√ÅN M√É KEY VIP" class="w-full p-5 cyber-input mb-4 uppercase text-xs font-black">
                <button onclick="activateLicense()" class="w-full py-5 btn-main rounded-2xl text-xs font-black uppercase">M·ªü kh√≥a Tool</button>
            </div>
            
            <div id="tool-interface" class="hidden space-y-4 text-center relative p-2">
                <p id="expiry-text" class="text-[10px] font-bold text-cyan-400 uppercase italic"></p>
                <div class="relative">
                    <textarea id="md5-input" placeholder="D√ÅN M√É PHI√äN MD5 T·∫†I ƒê√ÇY..." class="w-full h-28 p-4 cyber-input uppercase text-[11px] font-bold border-dashed border-cyan-500/30" style="background: rgba(0,0,0,0.8) !important;"></textarea>
                </div>
                <button id="ana-btn" onclick="runAnalysis()" class="w-full py-5 btn-main rounded-2xl text-xs font-black uppercase tracking-[2px]">B·∫Øt ƒë·∫ßu Ph√¢n T√≠ch</button>
                <div id="res-display" class="hidden mt-4 animate__animated animate__fadeIn">
                    <div class="glass-card p-6 border-cyan-500/40 bg-black/60 text-center">
                        <p id="res-val" class="text-8xl font-black italic italic"></p>
                        <p id="res-acc" class="text-xs font-bold text-yellow-500 mt-2"></p>
                    </div>
                </div>
            </div>
        </div>

    </div>    
</div>    
    
<div id="main-nav" class="nav-bar hidden">    
    <div class="nav-item active" onclick="navigateTo('portal'); setActiveNav(this)">    
        <svg fill="currentColor" viewBox="0 0 24 24" width="22"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>    
        <span>Trang Ch·ªß</span>    
    </div>    
    <div class="nav-item" onclick="showRanking(); setActiveNav(this)">    
        <svg fill="currentColor" viewBox="0 0 24 24" width="22"><path d="M7.5 21H2V9h5.5v12zm7.25 0h-5.5V3h5.5v18zM22 21h-5.5V12H22v9z"/></svg>    
        <span>X·∫øp H·∫°ng</span>    
    </div>    
    <div class="nav-center" onclick="checkToolAccess(); setActiveNav(this)">    
        <svg viewBox="0 0 24 24" width="28" fill="white"><path d="M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>    
    </div>    
    <div class="nav-item" onclick="navigateTo('nap'); setActiveNav(this)">    
        <svg fill="currentColor" viewBox="0 0 24 24" width="22"><path d="M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2-.9-2 2v8c0 1.1.89-2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>    
        <span>N·∫°p Ti·ªÅn</span>    
    </div>    
    <div class="nav-item" onclick="showPersonal(); setActiveNav(this)">    
        <svg fill="currentColor" viewBox="0 0 24 24" width="22"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>    
        <span>H·ªì S∆°</span>    
    </div>    
</div>    
    
<script>    
    const CONFIG = {    
        TELE_TOKEN: "8537007585:AAE5Z1aX4ZCMxCySB5I_qNpzhQS6sr84SsU",    
        TELE_CHAT_ID: "8144161968",    
        STK: "103886058569",    
        BANK: "ICB",      
        DB_NAME: "MD5_DATABASE_PRO_V6_8"    
    };    
    
    let currentUser = null;    
    const getDB = () => JSON.parse(localStorage.getItem(CONFIG.DB_NAME)) || { users: [], keys: [], history: [] };    
    const saveDB = (db) => localStorage.setItem(CONFIG.DB_NAME, JSON.stringify(db));    
    
    // NAVIGATION & STATUS CONTROL
    function showStatus(title, desc, type = 'loading', key = '') {
        const overlay = document.getElementById('status-overlay');
        const spinner = document.getElementById('loading-spinner');
        const done = document.getElementById('success-done');
        const keyBox = document.getElementById('key-result-box');

        overlay.style.display = 'flex';
        
        if(type === 'loading') {
            spinner.classList.remove('hidden');
            done.classList.add('hidden');
            document.getElementById('status-text').innerText = title;
        } else {
            spinner.classList.add('hidden');
            done.classList.remove('hidden');
            document.getElementById('success-title').innerText = title;
            document.getElementById('success-desc').innerText = desc;
            
            if(key) {
                keyBox.classList.remove('hidden');
                document.getElementById('key-val').innerText = key;
            } else {
                keyBox.classList.add('hidden');
            }
        }
    }

    function closeStatus() {
        document.getElementById('status-overlay').style.display = 'none';
    }

    function navigateTo(boxId) {  
        showStatus("ƒêang ƒë·ªìng b·ªô...");
        setTimeout(() => {  
            closeStatus();
            document.querySelectorAll('[id^="box-"]').forEach(b => b.classList.add('hidden'));    
            document.getElementById('box-' + boxId).classList.remove('hidden');    
            if(boxId === 'portal') refreshPortal();
            if(boxId === 'nap') {
                document.getElementById('ref-id-nap').innerText = currentUser.ref;
                document.getElementById('btn-copy-ref').onclick = () => copyText(currentUser.ref);
                document.getElementById('qr-code').src = `https://img.vietqr.io/image/${CONFIG.BANK}-${CONFIG.STK}-compact.png?amount=0&addInfo=${currentUser.ref}`;
            }
        }, 500);  
    }  

    function setActiveNav(el) {    
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));    
        if(!el.classList.contains('nav-center')) el.classList.add('active');    
    }

    // AUTH
    function doLogin() {    
        const u = document.getElementById('u').value.trim().toUpperCase();    
        const p = document.getElementById('p').value;    
        if(!u || !p) return alert("Vui l√≤ng nh·∫≠p ƒë·ªß!");
        
        showStatus("ƒêang x√°c th·ª±c...");
        setTimeout(() => {
            let db = getDB();    
            const f = db.users.find(x => x.u === u && x.p === p);    
            if(f) {    
                currentUser = f;    
                document.getElementById('main-nav').classList.remove('hidden');    
                showStatus("ƒêƒÇNG NH·∫¨P TH√ÄNH C√îNG", `Ch√†o m·ª´ng ${u} quay tr·ªü l·∫°i h·ªá th·ªëng!`, 'success');
                setTimeout(() => { closeStatus(); navigateTo('portal'); }, 1500);
            } else {
                closeStatus();
                alert("Sai th√¥ng tin ƒëƒÉng nh·∫≠p!");
            }
        }, 1000);
    }    

    function doReg() {    
        const u = document.getElementById('r-u').value.trim().toUpperCase();    
        const p = document.getElementById('r-p').value;    
        if(u.length < 3) return alert("T√™n qu√° ng·∫Øn!");    
        
        showStatus("ƒêang t·∫°o t√†i kho·∫£n...");
        setTimeout(() => {
            let db = getDB();    
            if(db.users.find(x => x.u === u)) { closeStatus(); return alert("T√†i kho·∫£n ƒë√£ t·ªìn t·∫°i!"); }    
            const newUser = { u, p, email: document.getElementById('r-email').value, phone: document.getElementById('r-phone').value, bal: 0, ref: "VIP" + Math.floor(1000 + Math.random()*8999), hsd: null };    
            db.users.push(newUser); saveDB(db);    
            currentUser = newUser;
            document.getElementById('main-nav').classList.remove('hidden');
            showStatus("ƒêƒÇNG K√ù TH√ÄNH C√îNG", "T√†i kho·∫£n c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c k√≠ch ho·∫°t tr√™n h·ªá th·ªëng.", 'success');
            setTimeout(() => { closeStatus(); navigateTo('portal'); }, 1500);
        }, 1000);
    }

    // N·∫†P TI·ªÄN
    function sendNapTele() {
        const amount = document.getElementById('nap-amount').value;
        if(!amount || amount < 1000) return alert("S·ªë ti·ªÅn kh√¥ng h·ª£p l·ªá!");
        
        showStatus("ƒêang g·ª≠i y√™u c·∫ßu...");
        const msg = `üîî Y√äU C·∫¶U N·∫†P TI·ªÄN\nüë§ User: ${currentUser.u}\nüÜî M√£ Ref: ${currentUser.ref}\nüí∞ S·ªë ti·ªÅn: ${Number(amount).toLocaleString()} VNƒê`;
        
        fetch(`https://api.telegram.org/bot${CONFIG.TELE_TOKEN}/sendMessage?chat_id=${CONFIG.TELE_CHAT_ID}&text=${encodeURIComponent(msg)}`)
        .then(() => {
            showStatus("G·ª¨I Y√äU C·∫¶U TH√ÄNH C√îNG", "Vui l√≤ng ch·ªù Admin duy·ªát trong gi√¢y l√°t. Th√¥ng b√°o s·∫Ω hi·ªÉn th·ªã khi ho√†n t·∫•t.", 'success');
        });
    }

    // MUA KEY & COPY
    function buyKey(price, days, name) {
        let db = getDB();
        const uIdx = db.users.findIndex(u => u.u === currentUser.u);
        if(db.users[uIdx].bal < price) return alert("S·ªë d∆∞ kh√¥ng ƒë·ªß! Vui l√≤ng n·∫°p th√™m.");
        
        if(confirm(`X√°c nh·∫≠n mua ${name} v·ªõi gi√° ${price.toLocaleString()} VNƒê?`)) {
            showStatus("ƒêang kh·ªüi t·∫°o m√£ Key...");
            setTimeout(() => {
                db.users[uIdx].bal -= price;
                const key = "VIP-" + Math.random().toString(36).substring(2, 10).toUpperCase();
                db.keys.push({ key, days, used: false, owner: currentUser.u });
                saveDB(db);
                refreshPortal();
                showStatus("GIAO D·ªäCH TH√ÄNH C√îNG", `B·∫°n ƒë√£ mua th√†nh c√¥ng ${name}. H√£y sao ch√©p m√£ Key b√™n d∆∞·ªõi:`, 'success', key);
            }, 1000);
        }
    }

    function copyText(txt) {
        navigator.clipboard.writeText(txt).then(() => {
            const btn = event.target;
            const oldTxt = btn.innerText;
            btn.innerText = "OK!";
            setTimeout(() => btn.innerText = oldTxt, 1000);
        });
    }

    // PH·∫¶N C√íN L·∫†I GI·ªÆ NGUY√äN KH√îNG ƒê·ªîI
    function refreshPortal() {    
        const db = getDB();    
        currentUser = db.users.find(u => u.u === currentUser.u);    
        document.getElementById('portal-user').innerText = "XIN CH√ÄO, " + currentUser.u;    
        document.getElementById('portal-bal').innerText = currentUser.bal.toLocaleString() + " VNƒê";    
        document.getElementById('portal-ref').innerText = currentUser.ref;    
    }

    function showPersonal() {
        const db = getDB();
        currentUser = db.users.find(u => u.u === currentUser.u);
        document.getElementById('info-u').innerText = currentUser.u;
        document.getElementById('info-email').innerText = currentUser.email || "CH∆ØA C·∫¨P NH·∫¨T";
        document.getElementById('info-phone').innerText = currentUser.phone || "CH∆ØA C·∫¨P NH·∫¨T";
        document.getElementById('info-bal').innerText = currentUser.bal.toLocaleString() + " VNƒê";
        document.getElementById('info-key').innerText = (currentUser.hsd && currentUser.hsd > Date.now()) ? "üíé ƒêANG HO·∫†T ƒê·ªòNG" : "‚ùå CH∆ØA K√çCH HO·∫†T";
        navigateTo('info');
    }

    function showRanking() {
        const db = getDB();
        const sortedUsers = [...db.users].sort((a, b) => b.bal - a.bal).slice(0, 10);
        document.getElementById('ranking-list').innerHTML = sortedUsers.map((u, i) => `
            <div class="rank-item ${i === 0 ? 'top-1' : ''}">
                <div class="flex items-center gap-3">
                    <span class="font-black italic text-cyan-400 w-5">${i + 1}</span>
                    <span class="text-[11px] font-black uppercase text-gray-300">${u.u.substring(0, 3)}***</span>
                </div>
                <span class="text-[11px] font-black text-cyan-400">${u.bal.toLocaleString()} VNƒê</span>
            </div>
        `).join('');
        navigateTo('rank');
    }

    function checkToolAccess() {
        if(currentUser.hsd && currentUser.hsd > Date.now()) {
            document.getElementById('key-activation').classList.add('hidden');
            document.getElementById('tool-interface').classList.remove('hidden');
            document.getElementById('expiry-text').innerText = "H·∫æT H·∫†N: " + new Date(currentUser.hsd).toLocaleDateString();
        } else {
            document.getElementById('key-activation').classList.remove('hidden');
            document.getElementById('tool-interface').classList.add('hidden');
        }
        navigateTo('use-key');
    }

    function activateLicense() {
        const kv = document.getElementById('key-input').value.trim().toUpperCase();
        let db = getDB();
        const kIdx = db.keys.findIndex(k => k.key === kv && !k.used);
        if(kIdx === -1) return alert("Key kh√¥ng h·ª£p l·ªá ho·∫∑c ƒë√£ s·ª≠ d·ª•ng!");
        const uIdx = db.users.findIndex(u => u.u === currentUser.u);
        db.users[uIdx].hsd = Date.now() + (db.keys[kIdx].days * 86400000);
        db.keys[kIdx].used = true;
        saveDB(db);
        showStatus("K√çCH HO·∫†T TH√ÄNH C√îNG", "Tool ƒë√£ ƒë∆∞·ª£c m·ªü kh√≥a. Ch√∫c b·∫°n th·∫Øng l·ªõn!", 'success');
        setTimeout(() => { closeStatus(); checkToolAccess(); }, 1500);
    }

    function runAnalysis() {
        const input = document.getElementById('md5-input').value.trim();
        if(input.length < 10) return alert("M√£ MD5 kh√¥ng h·ª£p l·ªá!");
        const btn = document.getElementById('ana-btn');
        btn.disabled = true;
        btn.innerText = "ƒêANG PH√ÇN T√çCH...";
        
        let hash = 0;
        for (let i = 0; i < input.length; i++) { hash = ((hash << 5) - hash) + input.charCodeAt(i); hash |= 0; }
        const seed = Math.abs(hash);

        setTimeout(() => {
            btn.disabled = false;
            btn.innerText = "B·∫Øt ƒë·∫ßu Ph√¢n T√≠ch";
            const isTai = (seed % 100) > 49;
            const acc = (95 + (seed % 450) / 100).toFixed(2);
            const v = document.getElementById('res-val');
            v.innerText = isTai ? "T√ÄI" : "X·ªàU";
            v.className = `text-8xl font-black italic py-2 ${isTai ? 'text-cyan-400' : 'text-red-500'}`;
            document.getElementById('res-acc').innerText = "ƒê·ªò TIN C·∫¨Y: " + acc + "%";
            document.getElementById('res-display').classList.remove('hidden');
        }, 2000);
    }

    // Canvas Background
    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    let particles = [];
    for(let i=0; i<50; i++) particles.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, r:Math.random()*2, s:Math.random()*0.5});
    function draw() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = "rgba(0, 242, 255, 0.2)";
        particles.forEach(p => {
            ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
            p.y -= p.s; if(p.y < -10) p.y = canvas.height + 10;
        });
        requestAnimationFrame(draw);
    }
    draw();
</script>    
</body>    
</html>
