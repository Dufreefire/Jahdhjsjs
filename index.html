<!DOCTYPE html>          
<html lang="vi">          
<head>          
    <meta charset="UTF-8">          
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">          
    <title>Tool MD5 Premium - RGB Edition 2026</title>          
    <script src="https://cdn.tailwindcss.com"></script>          
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>          
    <style>          
        @import url('https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;700;900&display=swap');          
        :root { --main: #00f2ff; --sub: #7000ff; --dark: #020205; }          
            
        * { -webkit-user-select: none; user-select: none; box-sizing: border-box; outline: none !important; -webkit-tap-highlight-color: transparent; }          
        input, textarea { -webkit-user-select: auto !important; user-select: auto !important; pointer-events: auto !important; }    
    
        body { background-color: var(--dark); color: white; font-family: 'Lexend', sans-serif; overflow: hidden; height: 100vh; margin: 0; }          
        #bg-canvas { position: fixed; inset: 0; z-index: -1; }          
          
        /* HI·ªÜU ·ª®NG 7 M√ÄU CHUY·ªÇN ƒê·ªòNG (RGB) */
        .rgb-border {
            background: linear-gradient(45deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
            background-size: 400% 400%;
            animation: rgb-move 6s linear infinite;
        }
        @keyframes rgb-move { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        .glass-card { background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.1); backdrop-filter: blur(20px); border-radius: 25px; }          
        .btn-main { background: linear-gradient(135deg, var(--main) 0%, var(--sub) 100%); color: white; font-weight: 800; }          
        .cyber-input { background: rgba(0, 0, 0, 0.6) !important; border: 1px solid rgba(0, 242, 255, 0.2) !important; color: var(--main) !important; border-radius: 15px !important; text-align: center; }          
          
        /* G√ìI KEY ITEM M·ªöI */
        .pkg-item { position: relative; padding: 2px; border-radius: 20px; transition: 0.3s; cursor: pointer; }
        .pkg-item:active { transform: scale(0.96); }
        .pkg-inner { background: #0a0a14; border-radius: 18px; padding: 15px; display: flex; justify-content: space-between; align-items: center; }

        /* NAV BAR & CENTER BUTTON */
        .nav-bar { position: fixed; bottom: 0; left: 0; right: 0; height: 85px; background: rgba(5,5,10,0.9); border-top: 1px solid rgba(255,255,255,0.05); backdrop-filter: blur(25px); display: flex; justify-content: space-around; align-items: center; z-index: 999; }          
        .nav-item { display: flex; flex-direction: column; align-items: center; color: #555; width: 60px; }          
        .nav-item.active { color: var(--main); text-shadow: 0 0 10px var(--main); }          
        .nav-center-wrap { position: relative; top: -30px; }
        .nav-center-btn { 
            width: 65px; height: 65px; 
            background: linear-gradient(135deg, var(--main), var(--sub)); 
            border-radius: 22px; transform: rotate(45deg); 
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 20px rgba(0, 242, 255, 0.3);
            border: 4px solid var(--dark);
        }
        .nav-center-btn svg { transform: rotate(-45deg); width: 30px; height: 30px; color: white; }

        /* K·∫æT QU·∫¢ PH√ÇN T√çCH M·ªöI */
        .res-container { background: rgba(0,0,0,0.8); border: 2px solid var(--main); border-radius: 30px; position: relative; overflow: hidden; }
        .res-scan-line { position: absolute; inset: 0; background: linear-gradient(to bottom, transparent, rgba(0,242,255,0.1), transparent); height: 50px; width: 100%; animation: scan-anim 2s linear infinite; }
        @keyframes scan-anim { 0% { top: -50px; } 100% { top: 100%; } }

        /* T√çCH XANH M·ªöI */
        .success-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 10000; display: none; align-items: center; justify-content: center; flex-direction: column; }          
        .verify-circle { width: 100px; height: 100px; background: var(--main); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 50px var(--main); position: relative; }
        .verify-circle::after { content: ""; position: absolute; inset: -15px; border: 2px solid var(--main); border-radius: 50%; animation: ping 1.5s infinite; }
    </style>          
</head>          
<body>          
        
<div id="transition-screen" class="fixed inset-0 bg-black z-[11000] hidden flex flex-col items-center justify-center">        
    <div class="w-16 h-16 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"></div>
    <div id="matrix-status" class="mt-6 text-cyan-400 font-bold tracking-[5px] text-[10px]">ƒêANG T·∫¢I D·ªÆ LI·ªÜU...</div>        
</div>        
          
<canvas id="bg-canvas"></canvas>          
<canvas id="fireworks" class="fixed inset-0 pointer-events-none z-[10001]"></canvas>

<div id="success-screen" class="success-overlay">          
    <div class="verify-circle animate__animated animate__zoomIn">          
        <svg width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="4"><polyline points="20 6 9 17 4 12"></polyline></svg>          
    </div>          
    <h2 id="success-text" class="mt-12 text-xl font-black text-white uppercase tracking-widest animate__animated animate__fadeInUp"></h2>          
</div>          
          
<div class="flex items-center justify-center min-h-screen p-4 pb-32">          
    <div class="w-full max-w-[400px]">          
                  
        <div id="box-login" class="glass-card p-8 animate__animated animate__fadeIn">          
            <div class="text-center mb-10">          
                <h1 class="text-3xl font-black italic tracking-tighter uppercase">MD5 <span class="text-cyan-400">PREMIUM</span></h1>          
                <div class="inline-block px-3 py-1 bg-cyan-500/10 rounded-full border border-cyan-500/30 mt-2">
                    <span class="text-[9px] font-bold text-cyan-400">H·ªÜ TH·ªêNG AI PH√ÇN T√çCH QU·ªêC T·∫æ</span>
                </div>
            </div>          
            <div class="space-y-4">          
                <input id="u" type="text" placeholder="T√ÄI KHO·∫¢N" class="w-full p-4 cyber-input uppercase font-bold">          
                <input id="p" type="password" placeholder="M·∫¨T KH·∫®U" class="w-full p-4 cyber-input font-bold">          
                <button onclick="doLogin()" class="w-full py-4 btn-main rounded-2xl text-sm font-black uppercase shadow-lg shadow-cyan-500/20">ƒêƒÇNG NH·∫¨P NGAY</button>          
            </div>          
        </div>          
          
        <div id="box-portal" class="hidden animate__animated animate__zoomIn">          
            <div class="glass-card p-6 mb-4 flex justify-between items-center bg-gradient-to-r from-cyan-500/10 to-transparent">
                <div>
                    <p id="portal-user" class="text-cyan-400 text-[10px] font-bold uppercase tracking-widest"></p>
                    <p id="portal-bal" class="text-3xl font-black text-white mt-1">0 ƒë</p>
                </div>
                <div class="w-12 h-12 rounded-2xl border-2 border-cyan-400 overflow-hidden shadow-[0_0_15px_rgba(0,242,255,0.3)]">
                    <img src="https://i.imgur.com/WLeaCev.jpeg" class="w-full h-full object-cover">
                </div>
            </div>
            
            <div class="grid grid-cols-2 gap-4">
                <div onclick="navigateTo('buy-key')" class="glass-card p-6 text-center border-white/5 active:scale-95 transition">
                    <div class="text-3xl mb-2">üíé</div><p class="text-[10px] font-bold uppercase tracking-widest">G√≥i Key VIP</p>
                </div>
                <div onclick="navigateTo('info')" class="glass-card p-6 text-center border-white/5 active:scale-95 transition">
                    <div class="text-3xl mb-2">üë§</div><p class="text-[10px] font-bold uppercase tracking-widest">Th√¥ng Tin</p>
                </div>
            </div>
        </div>          
          
        <div id="box-buy-key" class="hidden glass-card p-6 animate__animated animate__fadeInUp">          
            <h3 class="text-center font-black text-cyan-400 mb-6 uppercase text-xs tracking-[3px]">C·ª¨A H√ÄNG KEY ELITE</h3>          
            <div class="space-y-3 max-h-[400px] overflow-y-auto pr-2">          
                <div onclick="confirmBuy(10000, 0.04, 'Trial')" class="pkg-item rgb-border">          
                    <div class="pkg-inner">
                        <div><p class="text-[11px] font-black uppercase">D√ôNG TH·ª¨ (1H)</p><p class="text-[8px] text-gray-500">Tr·∫£i nghi·ªám h·ªá th·ªëng</p></div>
                        <p class="text-white font-black text-xs">10.000ƒë</p>
                    </div>
                </div>          
                <div onclick="confirmBuy(30000, 1, 'Standard')" class="pkg-item rgb-border">          
                    <div class="pkg-inner">
                        <div><p class="text-[11px] font-black uppercase text-green-400">G√ìI NG√ÄY (24H)</p><p class="text-[8px] text-gray-500">Ph·ªï bi·∫øn nh·∫•t</p></div>
                        <p class="text-white font-black text-xs">30.000ƒë</p>
                    </div>
                </div>          
                <div onclick="confirmBuy(80000, 3, 'Silver')" class="pkg-item rgb-border">          
                    <div class="pkg-inner">
                        <div><p class="text-[11px] font-black uppercase text-cyan-400">SILVER (3 NG√ÄY)</p><p class="text-[8px] text-gray-500">Ti·∫øt ki·ªám 20%</p></div>
                        <p class="text-white font-black text-xs">80.000ƒë</p>
                    </div>
                </div>          
                <div onclick="confirmBuy(150000, 7, 'Gold')" class="pkg-item rgb-border">          
                    <div class="pkg-inner">
                        <div><p class="text-[11px] font-black uppercase text-yellow-400">GOLD (7 NG√ÄY)</p><p class="text-[8px] text-gray-500">T·ªëi ∆∞u l·ª£i nhu·∫≠n</p></div>
                        <p class="text-white font-black text-xs">150.000ƒë</p>
                    </div>
                </div>          
                <div onclick="confirmBuy(500000, 30, 'Diamond')" class="pkg-item rgb-border">          
                    <div class="pkg-inner">
                        <div><p class="text-[11px] font-black uppercase text-pink-400">DIAMOND (30 NG√ÄY)</p><p class="text-[8px] text-gray-500">C·∫•p ƒë·ªô chuy√™n gia</p></div>
                        <p class="text-white font-black text-xs">500.000ƒë</p>
                    </div>
                </div>          
                <div onclick="confirmBuy(1000000, 9999, 'Eternal')" class="pkg-item rgb-border">          
                    <div class="pkg-inner">
                        <div><p class="text-[11px] font-black uppercase text-red-500">ETERNAL (Vƒ®NH VI·ªÑN)</p><p class="text-[8px] text-gray-500">ƒê·∫∑c quy·ªÅn t·ªëi cao</p></div>
                        <p class="text-white font-black text-xs">1.000.000ƒë</p>
                    </div>
                </div>          
            </div>          
        </div>          
          
        <div id="box-use-key" class="hidden glass-card p-6 animate__animated animate__fadeInUp">          
            <div id="key-activation">          
                <h3 class="text-center font-bold text-cyan-400 mb-6 uppercase text-sm">M·ªü Kh√≥a H·ªá Th·ªëng</h3>          
                <input id="key-input" type="text" placeholder="NH·∫¨P KEY VIP C·ª¶A B·∫†N" class="w-full p-5 cyber-input mb-4 uppercase font-bold tracking-widest">          
                <button onclick="activateLicense()" class="w-full py-5 btn-main rounded-2xl text-sm font-black uppercase">K√çCH HO·∫†T H·ªÜ TH·ªêNG</button>          
            </div>          

            <div id="tool-interface" class="hidden space-y-6">          
                <div class="flex justify-between items-center text-[9px] font-black bg-white/5 p-4 rounded-2xl border border-white/5">          
                    <span class="text-green-500 animate-pulse">‚óè M√ÅY CH·ª¶: ƒêANG K·∫æT N·ªêI</span>          
                    <span id="expiry-text" class="text-cyan-400"></span>          
                </div>          

                <div class="relative">
                    <textarea id="md5-input" placeholder="D√ÅN M√É PHI√äN MD5 V√ÄO ƒê√ÇY..." class="w-full h-32 p-5 cyber-input uppercase text-[13px] font-black tracking-widest"></textarea>
                    <div class="absolute bottom-3 right-3 text-[8px] text-gray-500">PH√ÇN T√çCH THEO TH·ªúI GIAN TH·ª∞C</div>
                </div>

                <button id="ana-btn" onclick="runAnalysis()" class="w-full py-5 btn-main rounded-2xl text-[14px] font-black uppercase tracking-[3px] shadow-xl shadow-cyan-500/20">B·∫ÆT ƒê·∫¶U PH√ÇN T√çCH</button>          
                
                <div id="res-display" class="hidden">          
                    <div class="res-container p-10 text-center">          
                        <div class="res-scan-line"></div>
                        <span id="res-acc" class="text-[11px] text-yellow-400 font-black uppercase tracking-[2px] mb-2 block"></span>          
                        <p id="res-val" class="font-black text-8xl italic py-2 drop-shadow-[0_0_20px_rgba(255,255,255,0.3)]"></p>          
                    </div>          
                    
                    <div class="mt-6 bg-white/5 rounded-2xl p-4 border border-white/10">
                        <p class="text-[8px] text-gray-500 font-black uppercase mb-3">NH·∫¨T K√ù PHI√äN G·∫¶N ƒê√ÇY</p>
                        <div id="session-history-list" class="space-y-2"></div>
                    </div>
                </div>          
            </div>          
        </div>

        <div id="box-info" class="hidden glass-card p-6 animate__animated animate__fadeIn">      
            <div class="flex flex-col items-center mb-6">
                <div class="w-20 h-20 rounded-3xl border-2 border-cyan-400 p-1 mb-3">
                    <img src="https://i.imgur.com/WLeaCev.jpeg" class="w-full h-full object-cover rounded-2xl">
                </div>
                <h3 id="info-u" class="font-black text-xl text-white uppercase tracking-widest"></h3>
                <span class="px-3 py-1 bg-cyan-500/10 text-cyan-400 text-[9px] font-bold rounded-full mt-2 border border-cyan-500/20">TH√ÄNH VI√äN PREMIUM</span>
            </div>

            <div class="space-y-1 bg-black/30 rounded-2xl p-2">      
                <div class="flex justify-between p-3 border-b border-white/5">      
                    <span class="text-[10px] text-gray-500 font-bold uppercase">S·ªë d∆∞</span>      
                    <span id="info-bal" class="text-[12px] text-green-400 font-black"></span>      
                </div>      
                <div class="flex justify-between p-3">      
                    <span class="text-[10px] text-gray-500 font-bold uppercase">H·∫°n d√πng</span>      
                    <span id="info-hsd" class="text-[12px] text-yellow-400 font-black uppercase"></span>      
                </div>      
            </div>      

            <button onclick="navigateTo('nap')" class="w-full mt-6 py-4 rgb-border rounded-2xl font-black text-xs uppercase text-white shadow-lg">N·∫†P TI·ªÄN V√ÄO T√ÄI KHO·∫¢N</button>
        </div>
    </div>          
</div>          
          
<div id="main-nav" class="nav-bar hidden">          
    <div class="nav-item active" onclick="navigateTo('portal'); setActiveNav(this)">          
        <svg fill="currentColor" viewBox="0 0 24 24" class="w-6 h-6"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>          
        <span class="text-[8px] font-black uppercase mt-1">Trang Ch·ªß</span>          
    </div>          
    
    <div class="nav-center-wrap" onclick="checkToolAccess(); setActiveNav(this)">          
        <div class="nav-center-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
        </div>
    </div>          
    
    <div class="nav-item" onclick="navigateTo('info'); setActiveNav(this)">          
        <svg fill="currentColor" viewBox="0 0 24 24" class="w-6 h-6"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>          
        <span class="text-[8px] font-black uppercase mt-1">C√° Nh√¢n</span>          
    </div>          
</div>          
          
<div id="buy-confirm-modal" class="fixed inset-0 bg-black/90 z-[2000] hidden items-center justify-center p-6">          
    <div class="glass-card w-full max-w-[320px] p-8 text-center animate__animated animate__zoomIn">          
        <h3 class="text-[10px] font-black text-gray-500 uppercase mb-2">X√ÅC NH·∫¨N MUA G√ìI</h3>          
        <p id="confirm-pkg-name" class="text-2xl font-black text-white uppercase mb-1"></p>          
        <p id="confirm-pkg-price" class="text-cyan-400 font-bold mb-8"></p>          
        <div class="flex gap-3">          
            <button onclick="closeBuyModal()" class="flex-1 py-4 bg-white/5 rounded-xl text-[10px] font-bold uppercase">H·ªßy</button>          
            <button id="final-buy-btn" class="flex-1 py-4 btn-main rounded-xl text-[10px] font-black uppercase">X√°c nh·∫≠n</button>          
        </div>          
    </div>          
</div>

<div id="box-nap" class="hidden glass-card p-6 text-center animate__animated animate__fadeIn fixed inset-0 z-[1500] bg-black/95 flex flex-col items-center justify-center">          
    <h3 class="text-cyan-400 font-black mb-6 uppercase text-xs tracking-widest">THANH TO√ÅN N·∫†P TI·ªÄN</h3>          
    <img id="qr-code" src="" class="w-48 h-48 rounded-3xl mb-6 bg-white p-2 border-4 border-cyan-500/30 shadow-[0_0_30px_rgba(0,242,255,0.2)]">          
    <div class="bg-white/5 p-4 rounded-2xl mb-6 w-full max-w-[280px]">          
        <p class="text-[9px] text-gray-500 uppercase font-bold mb-1">N·ªôi dung chuy·ªÉn kho·∫£n</p>          
        <p id="ref-id" class="text-2xl font-black text-white tracking-[5px]"></p>          
    </div>          
    <button onclick="navigateTo('portal')" class="text-gray-500 font-bold uppercase text-[10px]">Quay l·∫°i</button>          
</div>

<script>          
    // C·∫•u h√¨nh Database & Telegram
    var CONFIG = {          
        TELE_TOKEN: "8537007585:AAE5Z1aX4ZCMxCySB5I_qNpzhQS6sr84SsU",          
        TELE_CHAT_ID: "8144161968",          
        STK: "103886058569",          
        BANK: "ICB",           
        DB_NAME: "MD5_DATABASE_PRO_V6_8"          
    };          
          
    var currentUser = null;          
          
    var getDB = function() {      
        var data = localStorage.getItem(CONFIG.DB_NAME);      
        return data ? JSON.parse(data) : { users: [], keys: [], history: [] };      
    };      
    var saveDB = function(db) { localStorage.setItem(CONFIG.DB_NAME, JSON.stringify(db)); };          
          
    function navigateTo(boxId) {        
        var ts = document.getElementById('transition-screen');        
        ts.style.display = 'flex';        
        setTimeout(function() {        
            ts.style.display = 'none';        
            changeBox(boxId);        
        }, 600);        
    }        
          
    function changeBox(id) {          
        var boxes = document.querySelectorAll('[id^="box-"]');      
        boxes.forEach(b => b.classList.add('hidden'));      
        var target = document.getElementById('box-' + id);          
        if(target) target.classList.remove('hidden');          
        if(id === 'portal') refreshPortal();          
        if(id === 'info') renderInfoBox();       
        if(id === 'nap') {          
            document.getElementById('ref-id').innerText = currentUser.ref;          
            document.getElementById('qr-code').src = "https://img.vietqr.io/image/" + CONFIG.BANK + "-" + CONFIG.STK + "-compact.png?addInfo=" + currentUser.ref;          
        }          
    }          
          
    function doLogin() {          
        var u = document.getElementById('u').value.trim().toUpperCase();          
        var p = document.getElementById('p').value;          
        if(!u || !p) return;
        
        var db = getDB();          
        var f = db.users.find(x => x.u === u && x.p === p);      
        
        if(!f) {
            // T·ª± ƒë·ªông t·∫°o account m·ªõi ƒë·ªÉ test (n·∫øu ch∆∞a c√≥)
            f = { u:u, p:p, bal: 1000000, ref: "NAP" + Math.floor(1000 + Math.random()*8999), hsd: null };
            db.users.push(f); saveDB(db);
        }

        currentUser = f;          
        sessionStorage.setItem('activeUser', JSON.stringify(f));          
        document.getElementById('main-nav').classList.remove('hidden');          
        showSuccess("ƒêƒÇNG NH·∫¨P TH√ÄNH C√îNG", function() { navigateTo('portal'); });          
    }          
          
    function showSuccess(msg, cb) {          
        var s = document.getElementById('success-screen');          
        document.getElementById('success-text').innerText = msg;          
        s.style.display = 'flex';          
        startFireworks();
        setTimeout(function() { s.style.display = 'none'; if(cb) cb(); }, 2000);          
    }          
          
    function runAnalysis() {          
        var input = document.getElementById('md5-input').value.trim();          
        if(input.length < 10) return alert("M√£ MD5 kh√¥ng h·ª£p l·ªá!");          
        var btn = document.getElementById('ana-btn');          
        btn.innerText = "H·ªÜ TH·ªêNG ƒêANG QU√âT..."; btn.disabled = true;          
          
        setTimeout(function() {          
            // Thu·∫≠t to√°n gi·∫£ l·∫≠p ph√¢n t√≠ch
            let hash = 0; for(let i=0; i<input.length; i++) hash += input.charCodeAt(i);
            let isTai = hash % 2 === 0;
            let accuracy = (70.5 + (hash % 25)).toFixed(1);          
              
            var v = document.getElementById('res-val');          
            v.innerText = isTai ? "T√ÄI" : "X·ªàU";          
            v.className = "font-black text-8xl italic py-2 animate__animated animate__bounceIn " + (isTai ? 'text-cyan-400' : 'text-red-500');          
            document.getElementById('res-acc').innerText = "ƒê·ªò CH√çNH X√ÅC: " + accuracy + "%";          
            document.getElementById('res-display').classList.remove('hidden');          
              
            btn.innerText = "TI·∫æP T·ª§C PH√ÇN T√çCH"; btn.disabled = false;          
            startFireworks();
        }, 1500);          
    }          

    // C√°c h√†m ph·ª• tr·ª£ kh√°c (Keep from original)
    function setActiveNav(el) {          
        document.querySelectorAll('.nav-item').forEach(x => x.classList.remove('active'));      
        if(el.classList.contains('nav-item')) el.classList.add('active');          
    }          
    
    function refreshPortal() {          
        document.getElementById('portal-user').innerText = "XIN CH√ÄO, " + currentUser.u;          
        document.getElementById('portal-bal').innerText = currentUser.bal.toLocaleString() + " ƒë";          
    }      

    function renderInfoBox() {
        document.getElementById('info-u').innerText = currentUser.u;
        document.getElementById('info-bal').innerText = currentUser.bal.toLocaleString() + "ƒë";
        document.getElementById('info-hsd').innerText = (currentUser.hsd && currentUser.hsd > Date.now()) ? "ƒêANG HO·∫†T ƒê·ªòNG" : "CH∆ØA K√çCH HO·∫†T";
    }

    function confirmBuy(price, days, name) {          
        var modal = document.getElementById('buy-confirm-modal');          
        document.getElementById('confirm-pkg-name').innerText = "G√ìI " + name;          
        document.getElementById('confirm-pkg-price').innerText = price.toLocaleString() + " VNƒê";          
        modal.style.display = 'flex';          
        document.getElementById('final-buy-btn').onclick = function() {          
            if(currentUser.bal < price) return alert("Kh√¥ng ƒë·ªß s·ªë d∆∞!");
            currentUser.bal -= price;
            currentUser.hsd = Date.now() + (days * 86400000);
            saveDB(getDB());
            modal.style.display = 'none';          
            showSuccess("THANH TO√ÅN TH√ÄNH C√îNG", () => navigateTo('portal'));
        };          
    }          
          
    function closeBuyModal() { document.getElementById('buy-confirm-modal').style.display = 'none'; }          

    function checkToolAccess() {          
        if(currentUser.hsd && currentUser.hsd > Date.now()) {          
            navigateTo('use-key');          
            document.getElementById('key-activation').classList.add('hidden');          
            document.getElementById('tool-interface').classList.remove('hidden');          
            document.getElementById('expiry-text').innerText = "HSD: " + new Date(currentUser.hsd).toLocaleDateString();          
        } else {          
            navigateTo('use-key');
            document.getElementById('key-activation').classList.remove('hidden');          
            document.getElementById('tool-interface').classList.add('hidden');          
        }          
    }          

    // Background & Effects
    function initBg() {          
        var canvas = document.getElementById('bg-canvas'); var ctx = canvas.getContext('2d');          
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;          
        var p = []; for(var i=0; i<50; i++) p.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, r:Math.random()*1.5, s:Math.random()*0.5});          
        function draw() {          
            ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle = "rgba(0, 242, 255, 0.2)";          
            p.forEach(x => { ctx.beginPath(); ctx.arc(x.x, x.y, x.r, 0, Math.PI*2); ctx.fill(); x.y -= x.s; if(x.y < -10) x.y = canvas.height + 10; });          
            requestAnimationFrame(draw);          
        } draw();          
    }          

    function startFireworks() {
        var canvas = document.getElementById('fireworks'); var ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        var particles = [];
        for(var i=0; i<50; i++) {
            particles.push({
                x: canvas.width/2, y: canvas.height/2,
                vx: (Math.random()-0.5)*10, vy: (Math.random()-0.5)*10,
                c: 'hsl('+Math.random()*360+',100%,50%)', a: 1
            });
        }
        function anim() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            particles.forEach((p,i) => {
                p.x+=p.vx; p.y+=p.vy; p.a-=0.02;
                ctx.globalAlpha = p.a; ctx.fillStyle = p.c;
                ctx.beginPath(); ctx.arc(p.x, p.y, 3, 0, Math.PI*2); ctx.fill();
                if(p.a <= 0) particles.splice(i,1);
            });
            if(particles.length > 0) requestAnimationFrame(anim);
        } anim();
    }

    window.onload = initBg;
</script>          
</body>          
</html>
